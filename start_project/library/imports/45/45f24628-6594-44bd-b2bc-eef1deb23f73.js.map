{"version":3,"sources":["../../../../assets/script/assets/script/Star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","game","default","serializable","onLoad","getPlayerDistance","playerPos","player","getPosition","dist","pDistance","node","position","onPicked","spawnNewStar","gainScore","destroy","start","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AAAA,eAAK;AACb;AACAC,wBAAW,CAFE;AAGb;AACAC,kBAAK;AACDC,yBAAS,IADR;AAEDC,8BAAc;AAFb;AAJQ,SAAL;AAAA,KAHP;;AAaLC,YAAQ,kBAAW,CAGlB,CAhBI;;AAkBL;;;AAGAC,uBAAkB,6BAAU;AACxB;AACA,YAAIC,YAAY,KAAKL,IAAL,CAAUM,MAAV,CAAiBC,WAAjB,EAAhB;AACA;AACA;AACA;AACA,YAAIC,OAAOd,GAAGe,SAAH,CAAa,KAAKC,IAAL,CAAUC,QAAvB,EAAiCN,SAAjC,CAAX;AACA,eAAOG,IAAP;AAEH,KA9BI;;AAgCL;;;AAGAI,cAAS,oBAAU;AACf;AACA,aAAKZ,IAAL,CAAUa,YAAV;AACA;AACA,aAAKb,IAAL,CAAUc,SAAV;AACA;AACA,aAAKJ,IAAL,CAAUK,OAAV;AAEH,KA3CI;;AA6CLC,WAAO,iBAAW,CAEjB,CA/CI;;AAiDLC,YAAQ,gBAASC,EAAT,EAAa;AACjB;AACA;AACA;AACA,YAAI,KAAKd,iBAAL,KAA2B,KAAKL,UAApC,EAAgD;AAC5C;AACA,iBAAKa,QAAL;AACA;AACH;AACJ;AA1DI,CAAT","file":"Star.js","sourceRoot":"../../../../assets/script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: ()=>({\n        //碰撞检测,当两者之间的距离小于这玩意时,视为得分\n        pickRadius:0,\n        //暂存对象引用\n        game:{\n            default: null,\n            serializable: false\n        }\n    }),\n\n    onLoad :function() {\n\n\n    },\n\n    /**\n     * 获取主角与星星之间的距离\n     */\n    getPlayerDistance:function(){\n        //根据player节点位置判断距离\n        let playerPos = this.game.player.getPosition();\n        // 根据两点位置计算两点之间距离\n        // console.log(\"星星的位置:\",this.node.position);\n        // console.log(\"角色的位置:\",playerPos);\n        let dist = cc.pDistance(this.node.position, playerPos);\n        return dist;\n\n    },\n\n    /**\n     * 两者碰撞时\n     */\n    onPicked:function(){\n        //当星星被收集时,调用game脚本中的接口\n        this.game.spawnNewStar();\n        // 调用 Game 脚本的得分方法\n        this.game.gainScore();\n        //销毁当前节点\n        this.node.destroy();\n\n    },\n\n    start :function() {\n\n    },\n\n    update :function(dt) {\n        //判断星星与主角的距离\n        // 每帧判断和主角之间的距离是否小于收集距离\n        // console.log(this.getPlayerDistance());\n        if (this.getPlayerDistance() < this.pickRadius) {\n            // 调用收集行为\n            this.onPicked();\n            return;\n        }\n    },\n});\n"]}